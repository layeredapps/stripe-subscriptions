<!DOCTYPE html>
<html lang="en" data-navbar="/account/subscriptions/navbar-billing-profile.html">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <title translate="yes">Add payment method</title>
    <link href="/public/content.css" rel="stylesheet">
    <link href="/public/content-additional.css" rel="stylesheet">
    <base href="/" target="_top">
    <script id="stripe-v3" src="https://js.stripe.com/v3/"></script>
    <script id="common-v3" src="/public/subscriptions/subscriptions.js"></script>
    <script id="handler-v3" src="/public/subscriptions/stripe-v3-add-payment-method.js"></script>
  </head>
  <body>
    <div class="container">
      <h1 translate="yes">Add payment method</h1>
      <div id="message-container"></div>
      <form id="form-stripejs-v3" method="post" class="input-form" action="/account/subscriptions/add-payment-method?customerid=${customer.customerid}" name="form-stripejs-v3">
        <input type="hidden" name="csrf-token" />
        <input type="hidden" id="stripe-publishable-key" />
        <input type="hidden" name="token" id="token">
        <div id="card-errors"></div>
        <div class="input-fields">
          <label class="field-label" translate="yes">Card number</label>
          <div class="field">
            <div class="normal-field">
              <div id="card-container"></div>
            </div>
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label" for="cvc">CVC</label>
          <div class="field tiny-field">
            <div id="cvc-container"></div>
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label" for="mm" translate="yes">Expiry</label>
          <div class="field">
            <div class="tiny-field">
              <div id="expiry-container"></div>
            </div>
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label" for="name" translate="yes">Name on card</label>
          <div class="field">
            <input required="" id="name" name="name" type="text" maxlength="1000">
            <span id="note-container-full-name"></span>
          </div>
        </div>
        <div id="address-container">
          <div class="input-fields">
            <label class="field-label" for="line1" translate="yes">Address line 1</label>
            <div class="field">
              <input id="line1" name="line1" type="text" maxlength="1000">
            </div>
          </div>
          <div class="input-fields">
            <label class="field-label" for="line2" translate="yes">Address line 2</label>
            <div class="field">
              <input id="line2" name="line2" type="text" maxlength="1000">
            </div>
          </div>
          <div class="input-fields">
            <label class="field-label" for="city" translate="yes">City</label>
            <div class="field">
              <input id="city" name="city" type="text" maxlength="1000">
            </div>
          </div>
          <div class="input-fields">
            <label class="field-label" for="state" translate="yes">State or province</label>
            <div class="field">
              <select id="state" name="state">
                <option value="" translate="yes">Select state</option>
              </select>
            </div>
          </div>
          <div class="input-fields">
            <label class="field-label" for="country" translate="yes">Country</label>
            <div class="field">
              <select id="country" name="country">
                <option value="" translate="yes">Select country</option>
              </select>
            </div>
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label" translate="yes">Postal code</label>
          <div class="field">
            <div id="postal_code-container"></div>
          </div>
        </div>
        <div class="form-buttons spaced-buttons">
          <button id="submit-button" type="submit" translate="yes">Save profile</button>
          <button class="button" type="submit" name="refresh" value="true" translate="yes" formnovalidate="formnovalidate">Change country</button>
        </div>
      </form>
      <form id="form-nojs" method="post" class="input-form" action="/account/subscriptions/add-payment-method?customerid=${customer.customerid}" name="form-nojs">
        <input type="hidden" name="csrf-token" />
        <input type="hidden" id="stripe-publishable-key" />
        <div class="input-fields">
          <label class="field-label" for="description" translate="yes">Profile description</label>
          <div class="field">
            <input required="" id="description" name="description" type="text" maxlength="100">
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label" for="number" translate="yes">Card</label>
          <div class="field">
            <div class="normal-field">
              <input name="number" required="" id="number" type="text" maxlength="19">
            </div>
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label" for="cvc">CVC</label>
          <div class="field">
            <div class="tiny-field">
              <input name="cvc" required="" id="cvc" type="text" maxlength="3">
            </div>
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label" for="mm" translate="yes">Expiry</label>
          <div class="field">
            <div class="tiny-field">
              <input name="exp_month" required="" placeholder="MM" id="exp_month" type="text" maxlength="2">
              <input name="exp_year" required="" placeholder="YY" id="exp_year" type="text" maxlength="2">
            </div>
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label" for="name" translate="yes">Name on card</label>
          <div class="field">
            <input required="" id="name" name="name" type="text" maxlength="1000">
            <span id="note-container-full-name"></span>
          </div>
        </div>
        <div id="address-container">
          <div class="input-fields">
            <label class="field-label" for="line1" translate="yes">Address line 1</label>
            <div class="field">
              <input id="line1" name="line1" type="text" maxlength="1000">
            </div>
          </div>
          <div class="input-fields">
            <label class="field-label" for="line2" translate="yes">Address line 2</label>
            <div class="field">
              <input id="line2" name="line2" type="text" maxlength="1000">
            </div>
          </div>
          <div class="input-fields">
            <label class="field-label" for="city" translate="yes">City</label>
            <div class="field">
              <input id="city" name="city" type="text" maxlength="1000">
            </div>
          </div>
          <div class="input-fields">
            <label class="field-label" for="state" translate="yes">State or province</label>
            <div class="field">
              <select id="state" name="state">
                <option value="" translate="yes">
                  Select state
                </option>
              </select>
            </div>
          </div>
          <div class="input-fields">
            <label class="field-label" for="country" translate="yes">Country</label>
            <div class="field">
              <select name="country" id="country">
                <option value="" translate="yes">
                  Select country
                </option>
              </select>
            </div>
          </div>
        </div>
        <div id="postal_code-container" class="input-fields">
          <label class="field-label" for="postal_code">ZIP</label>
          <div class="field">
            <input id="postal_code" name="postal_code" type="text" maxlength="1000">
          </div>
        </div>
        <div class="input-fields">
          <label class="field-label"></label>
          <div class="form-buttons spaced-buttons">
            <button id="submit-button" type="submit" class="button" translate="yes">Save profile</button>
            <button class="button" type="submit" name="refresh" value="true" translate="yes" formnovalidate="formnovalidate">Change country</button>
          </div>
        </div>
      </form>
    </div>
    <template id="country-option">
      <option value="${country.code}">
        ${country.name}
      </option>
    </template>
    <template id="state-option">
      <option value="${state.code}">
        ${state.name}
      </option>
    </template>
    <template id="update-profile-full-name">
      <span class="field-note">
        Update your <a href="/account/edit-profile?profileid=${profile.profileid}">profile</a> if this does not match your card
      </span>
    </template>
    <template id="invalid-token">
      <div class="error message" translate="yes">
        Error! An error occurred submiting your payment information
      </div>
    </template>
    <template id="invalid-name">
      <div class="error message" translate="yes">
        Error! Missing or invalid name
      </div>
    </template>
    <template id="invalid-number">
      <div class="error message" translate="yes">
        Error! Missing or invalid card number
      </div>
    </template>
    <template id="invalid-cvc">
      <div class="error message" translate="yes">
        Error! Missing or invalid CVC number
      </div>
    </template>
    <template id="invalid-exp_month">
      <div class="error message" translate="yes">
        Error! Missing or invalid expiration month
      </div>
    </template>
    <template id="invalid-exp_year">
      <div class="error message" translate="yes">
        Error! Missing or invalid expiration year
      </div>
    </template>
    <template id="success">
      <div class="success message" translate="yes">
        Success! The billing profile has been created
      </div>
    </template>
    <template id="unknown-error">
      <div class="error message" translate="yes">
        Error! Something went wrong submitting the form
      </div>
    </template>
    <template id="invalid-account">
      <div class="error message" translate="yes">
        Error! You cannot add payment methods to someone else's account
      </div>
    </template>
    <template id="invalid-customerid">
      <div class="error message" translate="yes">
        Error! An invalid customer was specified
      </div>
    </template>
    <template id="invalid-csrf-token">
      <div class="error message" translate="yes">
        Error! This form was not submitted correctly
      </div>
    </template>
    <template id="invalid-xss-input">
      <div class="error message" translate="yes">
        Error! Invalid value(s) were posted to the server
      </div>
    </template>
  </body>
</html>